import{i as re,a as i,t as x,e as we,c as U}from"../chunks/disclose-version.CJC2IDF7.js";import{p as V,c as n,s as h,X as ze,r as s,t as P,a as Z,g as e,a4 as D,af as ke,f as G,$ as Ee,h as ce,d as Ce}from"../chunks/runtime.DamBQiK-.js";import{i as I}from"../chunks/if.CS2cQMCp.js";import{e as R,i as W}from"../chunks/each.B7vWdueF.js";import{s as je,a as q}from"../chunks/attributes.u1kV7g2C.js";import{a as de,p as X}from"../chunks/props.h2nwFH25.js";import{o as Te}from"../chunks/index-client.CmV38DSu.js";import{p as _e}from"../chunks/index.DVe-mCzi.js";import{s as F}from"../chunks/render.DiXaFIKv.js";import{t as ae}from"../chunks/class.C0UF-BvJ.js";import{t as Pe,f as Le}from"../chunks/index.BWDDU_M4.js";import{t as fe}from"../chunks/theme.svelte.ClDERdfw.js";import{h as Ye,H as Fe}from"../chunks/HomePageEvent.DtlN1bhq.js";import{p as He}from"../chunks/index.BjEEa4nc.js";import{M as Ne}from"../chunks/Metadata.DO8iINRu.js";import{a as Ie,b as Ae}from"../chunks/entry.UUan6elW.js";import{L as Oe}from"../chunks/Leaderboard.DIjAG7PU.js";function Re(c){return c/=.5,c<1?.5*c*c:(c--,-.5*(c*(c-2)-1))}var We=x('<div class="svelte-92mx0f"> </div>'),Je=x('<div class="svelte-92mx0f"> </div>'),Ge=x('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),qe=x('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function Be(c,t){V(t,!0);function f(o){if(!o)return[0,0];let a=0,p=0;for(const y of o)y.type==="school"?a++:p++;return[a,p]}let u=D(()=>f(t.events)),g=D(()=>e(u)[0]),w=D(()=>e(u)[1]);var k=qe();k.__click=function(...o){var a;(a=t.onClick)==null||a.apply(this,o)};var L=n(k);{var H=o=>{var a=Ge(),p=n(a);{var y=S=>{var d=We();q(d,"style","--color-badge: var(--color-badge-school);");var E=n(d,!0);s(d),P(()=>F(E,e(g))),i(S,d)};I(p,S=>{e(g)!=0&&S(y)})}var b=h(p,2);{var M=S=>{var d=Je();q(d,"style","--color-badge: var(--color-badge-club);");var E=n(d,!0);s(d),P(()=>F(E,e(w))),i(S,d)};I(b,S=>{e(w)!=0&&S(M)})}s(a),i(o,a)};I(L,o=>{t.onClick&&o(H)})}var Y=h(L,2);je(Y,()=>t.children??ze),s(k),P(()=>k.disabled=!t.onClick),i(c,k),Z()}re(["click"]);var Ke=x('<div class="calendar-detail__content__events__event svelte-g5jfz3"><h4 class="svelte-g5jfz3"> </h4> <p class="svelte-g5jfz3"><!></p></div>'),Qe=x('<div class="calendar-detail__no-events svelte-g5jfz3">No events on this day.</div>'),Ue=x('<div class="calendar-detail svelte-g5jfz3"><div class="calendar-detail__content svelte-g5jfz3"><div class="calendar-detail__content__heading svelte-g5jfz3"><div class="calendar-detail__content__heading__header svelte-g5jfz3"><button class="svelte-g5jfz3">&times;</button> <span class="school-event svelte-g5jfz3">School</span> <span class="club-event svelte-g5jfz3">Club</span></div> <h3 class="svelte-g5jfz3"> </h3></div> <div class="calendar-detail__content__events svelte-g5jfz3"></div></div></div>');function Xe(c,t){V(t,!0);var f=Ue(),u=n(f),g=n(u),w=n(g),k=n(w);k.__click=function(...o){var a;(a=t.onClose)==null||a.apply(this,o)},ke(4),s(w);var L=h(w,2),H=n(L,!0);P(()=>F(H,t.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"}))),s(L),s(g);var Y=h(g,2);R(Y,21,()=>t.events,W,(o,a)=>{var p=Ke(),y=n(p),b=n(y,!0);s(y);var M=h(y,2),S=n(M);{var d=z=>{var C=we();P(()=>F(C,e(a).description)),i(z,C)},E=z=>{var C=U(),v=G(C);Ye(v,()=>e(a).description),i(z,C)};I(S,z=>{e(a).useHTML?z(E,!1):z(d)})}s(M),s(p),P(()=>{q(y,"style",`--color-badge: var(--color-badge-${e(a).type})`),F(b,e(a).name)}),i(o,p)},o=>{var a=Qe();i(o,a)}),s(Y),s(u),s(f),i(c,f),Z()}re(["click"]);var Ve=(c,t,f,u)=>t(new Date(e(f),e(u)-1,1)),Ze=(c,t,f,u)=>t(new Date(e(f),e(u)+1,1)),$e=x('<div class="svelte-x8tf7f"> </div>'),et=x('<span class="calendar__body__day svelte-x8tf7f"> </span>'),tt=x("<div></div>"),at=x('<div class="calendar__body__event svelte-x8tf7f"><div class="text-wrapper svelte-x8tf7f"> </div></div>'),rt=x('<div class="calendar-detail svelte-x8tf7f"><!></div>'),st=x('<div class="calendar svelte-x8tf7f"><div class="calendar__header svelte-x8tf7f"><div class="calendar__header__date svelte-x8tf7f"><button aria-label="Previous month" class="svelte-x8tf7f"><i class="ri-arrow-left-s-line svelte-x8tf7f"></i></button> <h2 class="svelte-x8tf7f"> </h2> <button aria-label="Next month" class="svelte-x8tf7f"><i class="ri-arrow-right-s-line svelte-x8tf7f"></i></button></div> <div class="calendar__header__days svelte-x8tf7f"></div></div> <div class="calendar__body svelte-x8tf7f"><!> <!>  <!></div></div>');function nt(c,t){V(t,!0);const f=1e3*60*60*24,u=7,g=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function k(r,l){const _=new Map;return r.forEach(m=>{const A=l(m);for(const N of A){const T=_.get(N)||[];T.push(m),_.set(N,T)}}),_}function L(r,l){const _=new Date(r),m=new Date(l);return _.setHours(0,0,0,0),m.setHours(0,0,0,0),(m.getTime()-_.getTime())/f}function H(r){return r%4===0&&r%100!==0&&r%400!==0||r%100===0&&r%400===0}function Y(r){return H(r)?29:28}let o=de(t,"date",31,()=>X(new Date)),a=de(t,"selectedDate",15);const p=r=>()=>a(r);let y=D(()=>k(t.events,r=>{const l=Array(L(r.startDate,r.endDate)+1).fill(0),_=r.startDate.getFullYear(),m=r.startDate.getMonth(),A=r.startDate.getDate();return l.map((N,T)=>new Date(_,m,A+T).toDateString())})),b=D(()=>o().getMonth()),M=D(()=>o().getFullYear()),S=D(()=>[31,Y(e(M)),31,30,31,30,31,31,30,31,30,31]),d=D(()=>new Date(e(M),e(b),1).getDay()%7),E=D(()=>Math.ceil((e(d)+e(S)[e(b)])/7));var z=st(),C=n(z),v=n(C),j=n(v);j.__click=[Ve,o,M,b];var $=h(j,2),ge=n($);s($);var he=h($,2);he.__click=[Ze,o,M,b],s(v);var se=h(v,2);R(se,21,()=>w,W,(r,l)=>{var _=$e(),m=n(_,!0);s(_),P(()=>F(m,e(l))),i(r,_)}),s(se),s(C);var J=h(C,2),ne=n(J);R(ne,17,()=>({length:e(E)}),W,(r,l,_)=>{var m=U(),A=G(m);R(A,17,()=>({length:u}),W,(T,le,B)=>{var K=U();const Q=D(()=>_*u+B-e(d)+1),ve=D(()=>new Date(e(M),e(b),e(Q))),ie=D(()=>e(Q)>0&&e(Q)<=e(S)[e(b)]);var pe=G(K);{var be=O=>{var ee=D(()=>e(y).get(e(ve).toDateString())),ye=D(()=>e(ie)&&p(e(ve)));Be(O,{get events(){return e(ee)},get onClick(){return e(ye)},children:(Me,vt)=>{var te=et(),Se=n(te,!0);s(te),P(()=>F(Se,e(Q))),i(Me,te)},$$slots:{default:!0}})},xe=O=>{var ee=tt();i(O,ee)};I(pe,O=>{e(ie)?O(be):O(xe,!1)})}i(T,K)}),i(r,m)});var oe=h(ne,2);R(oe,17,()=>t.events.toReversed(),W,(r,l)=>{var _=U(),m=G(_);{var A=N=>{var T=at();const le=D(()=>`
						grid-row: ${Math.ceil((e(l).startDate.getDate()+e(d))/7)} / ${Math.ceil((e(l).endDate.getDate()+e(d))/7)};
						grid-column: ${e(l).startDate.getDay()+1} / ${e(l).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(l).type})
					`);var B=n(T),K=n(B,!0);s(B),s(T),P(()=>{q(T,"style",e(le)),F(K,e(l).name)}),i(N,T)};I(m,N=>{e(l).startDate.getMonth()===e(b)&&e(l).startDate.getFullYear()===e(M)&&N(A)})}i(r,_)});var me=h(oe,2);{var De=r=>{var l=rt(),_=n(l),m=D(()=>e(y).get(a().toDateString())||[]);Xe(_,{get date(){return a()},get events(){return e(m)},onClose:()=>a(null)}),s(l),Pe(3,l,()=>Le,()=>({x:250,opacity:1,duration:He.current?0:250,easing:Re})),i(r,l)};I(me,r=>{a()&&r(De)})}s(J),s(z),P(()=>{F(ge,`${g[e(b)]??""} ${e(M)??""}`),ae(J,"selected-date",a()),ae(J,"dark-mode",fe.value==="dark"),ae(J,"light-mode",fe.value==="light")}),i(c,z),Z()}re(["click"]);const ue=c=>{const t=new URL(window.location.toString());t.searchParams.forEach((f,u)=>t.searchParams.delete(u));for(let[f,u]of Object.entries(c))t.searchParams.set(f,u);try{Ie(t.toString(),{})}catch{console.log("womp womp")}};var ot=x('<h3 class="events__list-no-events svelte-1cxrsrz">No Events This Month</h3>'),lt=x('<!> <main class="svelte-1cxrsrz"><h1 class="svelte-1cxrsrz">Events</h1> <!> <section class="month-events svelte-1cxrsrz"><h2 class="svelte-1cxrsrz">Events This Month</h2> <div class="events__list svelte-1cxrsrz"><!> <!></div></section> <section class="leaderboard svelte-1cxrsrz"><h2 class="svelte-1cxrsrz"><a class="svelte-1cxrsrz">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function zt(c,t){V(t,!0);let f=X(u());function u(){const v=new Set;return t.data.events.filter(j=>j.startDate.getMonth()==new Date().getMonth()).filter(j=>v.has(j.name)?!1:(v.add(j.name),!0))}let g=Ce(void 0),w=!1;Te(()=>{if(_e.url.searchParams.has("date")){const v=_e.url.searchParams.get("date").split("-");ce(g,X(new Date(+v[0],+v[1]-1,+v[2]))),w=!0}}),Ee(()=>{if(e(g)===void 0||w){w=!1;return}if(e(g)===null){ue({});return}console.log(e(g)),ue({date:`${e(g).getFullYear()}-${e(g).getMonth()+1}-${e(g).getDate()}`})});const k="Events | RHHS StuCo",L="Stay up to date on all school events here!";var H=lt(),Y=G(H);Ne(Y,{title:k,description:L,url:"https://rhhsstuco.ca/events"});var o=h(Y,2),a=h(n(o),2);nt(a,{get events(){return t.data.events},get selectedDate(){return e(g)},set selectedDate(v){ce(g,X(v))}});var p=h(a,2),y=h(n(p),2),b=n(y);{var M=v=>{var j=ot();i(v,j)};I(b,v=>{f.length===0&&v(M)})}var S=h(b,2);R(S,17,()=>f,W,(v,j)=>{Fe(v,{get event(){return e(j)}})}),s(y),s(p);var d=h(p,2),E=n(d),z=n(E);q(z,"href",`${Ae??""}/grade-wars`),s(E);var C=h(E,2);Oe(C,{get gradeColors(){return t.data.standings.rankings},get gradePoints(){return t.data.standings.gradePoints}}),s(d),s(o),i(c,H),Z()}export{zt as component};
