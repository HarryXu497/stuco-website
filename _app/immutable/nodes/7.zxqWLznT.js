import{i as te,a as i,t as M,e as Se,c as G}from"../chunks/disclose-version.DdfHI4CV.js";import{p as U,c as o,s as D,X as we,r as s,t as T,a as X,g as e,a4 as p,aw as xe,f as W,$ as ke,d as ce,h as Ee}from"../chunks/runtime.ybpKW43T.js";import{i as N}from"../chunks/if.CJLyJS5S.js";import{e as L,i as O}from"../chunks/each.CpR5YdLG.js";import{a as de,p as K}from"../chunks/props.RSUnQutB.js";import{s as Ce,a as Te}from"../chunks/store.DjwPPW2I.js";import{p as Pe}from"../chunks/stores.DZp1dp-r.js";import{s as Y}from"../chunks/render.CG5KD97V.js";import{s as Ye,a as Q}from"../chunks/attributes.BCK-KNRS.js";import{t as ee}from"../chunks/class.DOtjtTmq.js";import{t as Fe,f as He}from"../chunks/index.nS8mueTp.js";import{t as _e}from"../chunks/theme.svelte.CADEXW5b.js";import{h as Ne,H as qe}from"../chunks/HomePageEvent.DEQP8z8F.js";import{p as Ie}from"../chunks/index.DCEMJSKy.js";import{M as Ae}from"../chunks/Metadata.BwIApE6q.js";import{p as Le}from"../chunks/entry.wBL9rXPk.js";import{o as Oe}from"../chunks/index-client.wTszehlu.js";function Re(c){return c/=.5,c<1?.5*c*c:(c--,-.5*(c*(c-2)-1))}var Je=M('<div class="svelte-92mx0f"> </div>'),We=M('<div class="svelte-92mx0f"> </div>'),Be=M('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),Ge=M('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function Ke(c,t){U(t,!0);function h(l){if(!l)return[0,0];let a=0,S=0;for(const w of l)w.type==="school"?a++:S++;return[a,S]}let d=p(()=>h(t.events)),x=p(()=>e(d)[0]),C=p(()=>e(d)[1]);var _=Ge();_.__click=function(...l){var a;(a=t.onClick)==null||a.apply(this,l)};var k=o(_);{var q=l=>{var a=Be(),S=o(a);{var w=j=>{var m=Je();Q(m,"style","--color-badge: var(--color-badge-school);");var P=o(m,!0);s(m),T(()=>Y(P,e(x))),i(j,m)};N(S,j=>{e(x)!=0&&j(w)})}var y=D(S,2);{var b=j=>{var m=We();Q(m,"style","--color-badge: var(--color-badge-club);");var P=o(m,!0);s(m),T(()=>Y(P,e(C))),i(j,m)};N(y,j=>{e(C)!=0&&j(b)})}s(a),i(l,a)};N(k,l=>{t.onClick&&l(q)})}var F=D(k,2);Ye(F,()=>t.children??we),s(_),T(()=>_.disabled=!t.onClick),i(c,_),X()}te(["click"]);var Qe=M('<div class="calendar-detail__content__events__event svelte-1t9pmp9"><h4 class="svelte-1t9pmp9"> </h4> <p class="svelte-1t9pmp9"><!></p></div>'),Ue=M('<div class="calendar-detail__no-events svelte-1t9pmp9">No events on this day.</div>'),Xe=M('<div class="calendar-detail svelte-1t9pmp9"><div class="calendar-detail__content svelte-1t9pmp9"><div class="calendar-detail__content__heading svelte-1t9pmp9"><div class="calendar-detail__content__heading__header svelte-1t9pmp9"><button class="svelte-1t9pmp9">&times;</button> <span class="school-event svelte-1t9pmp9">School</span> <span class="club-event svelte-1t9pmp9">Club</span></div> <h3 class="svelte-1t9pmp9"> </h3></div> <div class="calendar-detail__content__events svelte-1t9pmp9"></div></div></div>');function $e(c,t){U(t,!0);var h=Xe(),d=o(h),x=o(d),C=o(x),_=o(C);_.__click=function(...l){var a;(a=t.onClose)==null||a.apply(this,l)},xe(4),s(C);var k=D(C,2),q=o(k,!0);T(()=>Y(q,t.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"}))),s(k),s(x);var F=D(x,2);L(F,21,()=>t.events,O,(l,a)=>{var S=Qe(),w=o(S),y=o(w,!0);s(w);var b=D(w,2),j=o(b);{var m=n=>{var f=Se();T(()=>Y(f,e(a).description)),i(n,f)},P=n=>{var f=G(),R=W(f);Ne(R,()=>e(a).description),i(n,f)};N(j,n=>{e(a).useHTML?n(P,!1):n(m)})}s(b),s(S),T(()=>{Q(w,"style",`--color-badge: var(--color-badge-${e(a).type})`),Y(y,e(a).name)}),i(l,S)},l=>{var a=Ue();i(l,a)}),s(F),s(d),s(h),i(c,h),X()}te(["click"]);var ze=(c,t,h,d)=>t(new Date(e(h),e(d)-1,1)),Ve=(c,t,h,d)=>t(new Date(e(h),e(d)+1,1)),Ze=M('<div class="svelte-1nvjjef"> </div>'),et=M('<span class="calendar__body__day svelte-1nvjjef"> </span>'),tt=M("<div></div>"),at=M('<div class="calendar__body__event svelte-1nvjjef"> </div>'),rt=M('<div class="calendar-detail svelte-1nvjjef"><!></div>'),st=M('<div class="calendar svelte-1nvjjef"><div class="calendar__header svelte-1nvjjef"><div class="calendar__header__date svelte-1nvjjef"><button aria-label="Previous month" class="svelte-1nvjjef"><i class="ri-arrow-left-s-line svelte-1nvjjef"></i></button> <h2 class="svelte-1nvjjef"> </h2> <button aria-label="Next month" class="svelte-1nvjjef"><i class="ri-arrow-right-s-line svelte-1nvjjef"></i></button></div> <div class="calendar__header__days svelte-1nvjjef"></div></div> <div class="calendar__body svelte-1nvjjef"><!> <!>  <!></div></div>');function nt(c,t){U(t,!0);const h=1e3*60*60*24,d=7,x=["January","February","March","April","May","June","July","August","September","October","November","December"],C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function _(r,v){const u=new Map;return r.forEach(g=>{const I=v(g);for(const H of I){const E=u.get(H)||[];E.push(g),u.set(H,E)}}),u}function k(r,v){const u=new Date(r),g=new Date(v);return u.setHours(0,0,0,0),g.setHours(0,0,0,0),(g.getTime()-u.getTime())/h}function q(r){return r%4===0&&r%100!==0&&r%400!==0||r%100===0&&r%400===0}function F(r){return q(r)?29:28}let l=de(t,"date",31,()=>K(new Date)),a=de(t,"selectedDate",15);const S=r=>()=>a(r);let w=p(()=>_(t.events,r=>{const v=Array(k(r.startDate,r.endDate)+1).fill(0),u=r.startDate.getFullYear(),g=r.startDate.getMonth(),I=r.startDate.getDate();return v.map((H,E)=>new Date(u,g,I+E).toDateString())})),y=p(()=>l().getMonth()),b=p(()=>l().getFullYear()),j=p(()=>[31,F(e(b)),31,30,31,30,31,31,30,31,30,31]),m=p(()=>new Date(e(b),e(y),1).getDay()%7),P=p(()=>Math.ceil((e(m)+e(j)[e(y)])/7));var n=st(),f=o(n),R=o(f),ae=o(R);ae.__click=[ze,l,b,y];var $=D(ae,2),me=o($);s($);var fe=D($,2);fe.__click=[Ve,l,b,y],s(R);var re=D(R,2);L(re,21,()=>C,O,(r,v)=>{var u=Ze(),g=o(u,!0);s(u),T(()=>Y(g,e(v))),i(r,u)}),s(re),s(f);var J=D(f,2),se=o(J);L(se,17,()=>({length:e(P)}),O,(r,v,u)=>{var g=G(),I=W(g);L(I,17,()=>({length:d}),O,(E,oe,z)=>{var le=G();const B=p(()=>u*d+z-e(m)+1),ve=p(()=>new Date(e(b),e(y),e(B))),ie=p(()=>e(B)>0&&e(B)<=e(j)[e(y)]);var pe=W(le);{var De=A=>{var V=p(()=>e(w).get(e(ve).toDateString())),be=p(()=>e(ie)&&S(e(ve)));Ke(A,{get events(){return e(V)},get onClick(){return e(be)},children:(je,vt)=>{var Z=et(),Me=o(Z,!0);s(Z),T(()=>Y(Me,e(B))),i(je,Z)},$$slots:{default:!0}})},ye=A=>{var V=tt();i(A,V)};N(pe,A=>{e(ie)?A(De):A(ye,!1)})}i(E,le)}),i(r,g)});var ne=D(se,2);L(ne,17,()=>t.events,O,(r,v)=>{var u=G(),g=W(u);{var I=H=>{var E=at();const oe=p(()=>`
						grid-row: ${Math.ceil((e(v).startDate.getDate()+e(m))/7)} / ${Math.ceil((e(v).endDate.getDate()+e(m))/7)};
						grid-column: ${e(v).startDate.getDay()+1} / ${e(v).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(v).type})
					`);var z=o(E,!0);s(E),T(()=>{Q(E,"style",e(oe)),Y(z,e(v).name)}),i(H,E)};N(g,H=>{e(v).startDate.getMonth()===e(y)&&e(v).startDate.getFullYear()===e(b)&&H(I)})}i(r,u)});var he=D(ne,2);{var ge=r=>{var v=rt(),u=o(v),g=p(()=>e(w).get(a().toDateString())||[]);$e(u,{get date(){return a()},get events(){return e(g)},onClose:()=>a(null)}),s(v),Fe(3,v,()=>He,()=>({x:250,opacity:1,duration:Ie.current?0:250,easing:Re})),i(r,v)};N(he,r=>{a()&&r(ge)})}s(J),s(n),T(()=>{Y(me,`${x[e(y)]??""} ${e(b)??""}`),ee(J,"selected-date",a()),ee(J,"dark-mode",_e.value==="dark"),ee(J,"light-mode",_e.value==="light")}),i(c,n),X()}te(["click"]);const ue=c=>{const t=new URL(window.location.toString());t.searchParams.forEach((h,d)=>t.searchParams.delete(d));for(let[h,d]of Object.entries(c))t.searchParams.set(h,d);try{Le(t.toString(),{})}catch{console.log("womp womp")}};var ot=M('<h3 class="events__list-no-events svelte-1nr3gqv">No Events This Month</h3>'),lt=M('<!> <main class="svelte-1nr3gqv"><h1 class="svelte-1nr3gqv">Events</h1> <!> <section class="month-events svelte-1nr3gqv"><h2 class="svelte-1nr3gqv">Events This Month</h2> <div class="events__list svelte-1nr3gqv"><!> <!></div></section></main>',1);function xt(c,t){U(t,!0);const h=Ce(),d=()=>Te(Pe,"$page",h);let x=K(C());function C(){const n=new Set;return t.data.events.filter(f=>f.startDate.getMonth()==new Date().getMonth()).filter(f=>n.has(f.name)?!1:(n.add(f.name),!0))}let _=Ee(void 0),k=!1;Oe(()=>{if(d().url.searchParams.has("date")){const n=d().url.searchParams.get("date").split("-");ce(_,K(new Date(+n[0],+n[1]-1,+n[2]))),k=!0}}),ke(()=>{if(e(_)===void 0||k){k=!1;return}if(e(_)===null){ue({});return}console.log(e(_)),ue({date:`${e(_).getFullYear()}-${e(_).getMonth()+1}-${e(_).getDate()}`})});const q="Events | RHHS StuCo",F="Stay up to date on all school events here!";var l=lt(),a=W(l);Ae(a,{title:q,description:F,url:"https://rhhsstuco.ca/events"});var S=D(a,2),w=D(o(S),2);nt(w,{get events(){return t.data.events},get selectedDate(){return e(_)},set selectedDate(n){ce(_,K(n))}});var y=D(w,2),b=D(o(y),2),j=o(b);{var m=n=>{var f=ot();i(n,f)};N(j,n=>{x.length===0&&n(m)})}var P=D(j,2);L(P,17,()=>x,O,(n,f)=>{qe(n,{get event(){return e(f)}})}),s(b),s(y),s(S),i(c,l),X()}export{xt as component};
