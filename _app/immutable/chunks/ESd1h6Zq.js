var u=t=>{throw TypeError(t)};var l=(t,e,s)=>e.has(t)||u("Cannot "+s);var i=(t,e,s)=>(l(t,e,"read from private field"),s?s.call(t):e.get(t)),c=(t,e,s)=>e.has(t)?u("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),o=(t,e,s,r)=>(l(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{o as b}from"./CGPk1p6M.js";import{n as d,aC as m,i as g,q as k,y as p,g as _,aD as v}from"./DtozkBZ6.js";function x(t){d(t,t.v+1)}function M(t){let e=0,s=p(0),r;return()=>{m()&&(g(s),k(()=>(e===0&&(r=_(()=>t(()=>x(s)))),e+=1,()=>{v().then(()=>{e-=1,e===0&&(r==null||r(),r=void 0)})})))}}var n,a;class w{constructor(e,s){c(this,n);c(this,a);o(this,n,e),o(this,a,M(s))}get current(){return i(this,a).call(this),i(this,n).call(this)}}n=new WeakMap,a=new WeakMap;const q=/\(.+\)/;class Q extends w{constructor(e,s){let r=q.test(e)?e:`(${e})`;const f=window.matchMedia(r);super(()=>f.matches,h=>b(f,"change",h))}}export{Q as M,x as i};
