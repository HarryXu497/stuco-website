import{i as ee,t as b,a as v,e as we,f as Q}from"../chunks/CGPk1p6M.js";import{c as n,s as g,Y as ze,r as s,t as C,i as e,k as x,p as te,aE as ke,f as J,a as ae,d as Ee,n as ce,m as je}from"../chunks/DtozkBZ6.js";import{i as I}from"../chunks/Byb7hIPL.js";import{e as R,i as W,M as Te}from"../chunks/b78Zqdg0.js";import{s as G,a as Pe}from"../chunks/Bql567Of.js";import{p as U}from"../chunks/Dfl0b0A4.js";import{o as Ce}from"../chunks/olvYr8vg.js";import{p as de}from"../chunks/DyhpTaa1.js";import{s as H}from"../chunks/DHOX9dbC.js";import{t as Ye,f as Le}from"../chunks/DcwfTU-S.js";import{p as _e}from"../chunks/DCI1w4ly.js";import{t as fe}from"../chunks/BhMKAVad.js";import{p as Fe}from"../chunks/BO-oXO5U.js";import{s as He}from"../chunks/CSs4O44k.js";import{h as Ne,H as Ie}from"../chunks/BDFTyu0L.js";import{a as Ae,b as Oe}from"../chunks/CeQBYWHI.js";import{L as Re}from"../chunks/BQbsUUG4.js";function We(c){return c/=.5,c<1?.5*c*c:(c--,-.5*(c*(c-2)-1))}var Je=b('<div class="svelte-92mx0f"> </div>'),Ge=b('<div class="svelte-92mx0f"> </div>'),qe=b('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),Be=b('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function Ke(c,t){function f(o){if(!o)return[0,0];let a=0,p=0;for(const y of o)y.type==="school"?a++:p++;return[a,p]}let u=x(()=>f(t.events)),h=x(()=>e(u)[0]),w=x(()=>e(u)[1]);var k=Be();k.__click=function(...o){var a;(a=t.onclick)==null||a.apply(this,o)};var Y=n(k);{var N=o=>{var a=qe(),p=n(a);{var y=S=>{var d=Je();G(d,"style","--color-badge: var(--color-badge-school);");var E=n(d,!0);s(d),C(()=>H(E,e(h))),v(S,d)};I(p,S=>{e(h)!=0&&S(y)})}var D=g(p,2);{var M=S=>{var d=Ge();G(d,"style","--color-badge: var(--color-badge-club);");var E=n(d,!0);s(d),C(()=>H(E,e(w))),v(S,d)};I(D,S=>{e(w)!=0&&S(M)})}s(a),v(o,a)};I(Y,o=>{t.onclick&&o(N)})}var L=g(Y,2);He(L,()=>t.children??ze),s(k),C(()=>k.disabled=!t.onclick),v(c,k)}ee(["click"]);var Qe=b('<div class="calendar-detail__content__events__event svelte-g5jfz3"><h4 class="svelte-g5jfz3"> </h4> <p class="svelte-g5jfz3"><!></p></div>'),Ue=b('<div class="calendar-detail__no-events svelte-g5jfz3">No events on this day.</div>'),Ve=b('<div class="calendar-detail svelte-g5jfz3"><div class="calendar-detail__content svelte-g5jfz3"><div class="calendar-detail__content__heading svelte-g5jfz3"><div class="calendar-detail__content__heading__header svelte-g5jfz3"><button class="svelte-g5jfz3">&times;</button> <span class="school-event svelte-g5jfz3">School</span> <span class="club-event svelte-g5jfz3">Club</span></div> <h3 class="svelte-g5jfz3"> </h3></div> <div class="calendar-detail__content__events svelte-g5jfz3"></div></div></div>');function Xe(c,t){te(t,!0);var f=Ve(),u=n(f),h=n(u),w=n(h),k=n(w);k.__click=function(...o){var a;(a=t.onclose)==null||a.apply(this,o)},ke(4),s(w);var Y=g(w,2),N=n(Y,!0);s(Y),s(h);var L=g(h,2);R(L,21,()=>t.events,W,(o,a)=>{var p=Qe(),y=n(p),D=n(y,!0);s(y);var M=g(y,2),S=n(M);{var d=z=>{var j=we();C(()=>H(j,e(a).description)),v(z,j)},E=z=>{var j=Q(),i=J(j);Ne(i,()=>e(a).description),v(z,j)};I(S,z=>{e(a).useHTML?z(E,!1):z(d)})}s(M),s(p),C(()=>{G(y,"style",`--color-badge: var(--color-badge-${e(a).type})`),H(D,e(a).name)}),v(o,p)},o=>{var a=Ue();v(o,a)}),s(L),s(u),s(f),C(o=>H(N,o),[()=>t.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),v(c,f),ae()}ee(["click"]);var Ze=(c,t,f,u)=>t(new Date(e(f),e(u)-1,1)),$e=(c,t,f,u)=>t(new Date(e(f),e(u)+1,1)),et=b('<div class="svelte-x8tf7f"> </div>'),tt=b('<span class="calendar__body__day svelte-x8tf7f"> </span>'),at=b("<div></div>"),rt=b('<div class="calendar__body__event svelte-x8tf7f"><div class="text-wrapper svelte-x8tf7f"> </div></div>'),st=b('<div class="calendar-detail svelte-x8tf7f"><!></div>'),nt=b('<div class="calendar svelte-x8tf7f"><div class="calendar__header svelte-x8tf7f"><div class="calendar__header__date svelte-x8tf7f"><button aria-label="Previous month" class="svelte-x8tf7f"><i class="ri-arrow-left-s-line svelte-x8tf7f"></i></button> <h2 class="svelte-x8tf7f"> </h2> <button aria-label="Next month" class="svelte-x8tf7f"><i class="ri-arrow-right-s-line svelte-x8tf7f"></i></button></div> <div class="calendar__header__days svelte-x8tf7f"></div></div> <div><!> <!>  <!></div></div>');function ot(c,t){te(t,!0);const f=1e3*60*60*24,u=7,h=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function k(r,l){const _=new Map;return r.forEach(m=>{const A=l(m);for(const F of A){const P=_.get(F)||[];P.push(m),_.set(F,P)}}),_}function Y(r,l){const _=new Date(r),m=new Date(l);return _.setHours(0,0,0,0),m.setHours(0,0,0,0),(m.getTime()-_.getTime())/f}function N(r){return r%4===0&&r%100!==0&&r%400!==0||r%100===0&&r%400===0}function L(r){return N(r)?29:28}let o=_e(t,"date",31,()=>U(new Date)),a=_e(t,"selectedDate",15);const p=r=>()=>a(r);let y=x(()=>k(t.events,r=>{const l=Array(Y(r.startDate,r.endDate)+1).fill(0),_=r.startDate.getFullYear(),m=r.startDate.getMonth(),A=r.startDate.getDate();return l.map((F,P)=>new Date(_,m,A+P).toDateString())})),D=x(()=>o().getMonth()),M=x(()=>o().getFullYear()),S=x(()=>[31,L(e(M)),31,30,31,30,31,31,30,31,30,31]),d=x(()=>new Date(e(M),e(D),1).getDay()%7),E=x(()=>Math.ceil((e(d)+e(S)[e(D)])/7));var z=nt(),j=n(z),i=n(j),T=n(i);T.__click=[Ze,o,M,D];var V=g(T,2),ge=n(V);s(V);var he=g(V,2);he.__click=[$e,o,M,D],s(i);var re=g(i,2);R(re,21,()=>w,W,(r,l)=>{var _=et(),m=n(_,!0);s(_),C(()=>H(m,e(l))),v(r,_)}),s(re),s(j);var X=g(j,2);let se;var ne=n(X);R(ne,17,()=>({length:e(E)}),W,(r,l,_)=>{var m=Q(),A=J(m);R(A,17,()=>({length:u}),W,(F,P,q,le)=>{var B=Q();const K=x(()=>_*u+q-e(d)+1),ie=x(()=>new Date(e(M),e(D),e(K))),ve=x(()=>e(K)>0&&e(K)<=e(S)[e(D)]);var De=J(B);{var xe=O=>{const Z=x(()=>e(y).get(e(ie).toDateString())),ye=x(()=>e(ve)&&p(e(ie)));Ke(O,{get events(){return e(Z)},get onclick(){return e(ye)},children:(Me,vt)=>{var $=tt(),Se=n($,!0);s($),C(()=>H(Se,e(K))),v(Me,$)}})},be=O=>{var Z=at();v(O,Z)};I(De,O=>{e(ve)?O(xe):O(be,!1)})}v(F,B)}),v(r,m)});var oe=g(ne,2);R(oe,17,()=>t.events.toReversed(),W,(r,l)=>{var _=Q(),m=J(_);{var A=F=>{var P=rt(),q=n(P),le=n(q,!0);s(q),s(P),C(B=>{G(P,"style",B),H(le,e(l).name)},[()=>`
						grid-row: ${Math.ceil((e(l).startDate.getDate()+e(d))/7)} / ${Math.ceil((e(l).endDate.getDate()+e(d))/7)};
						grid-column: ${e(l).startDate.getDay()+1} / ${e(l).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(l).type})
					`]),v(F,P)};I(m,F=>{e(l).startDate.getMonth()===e(D)&&e(l).startDate.getFullYear()===e(M)&&F(A)})}v(r,_)});var me=g(oe,2);{var pe=r=>{var l=st(),_=n(l);const m=x(()=>e(y).get(a().toDateString())||[]);Xe(_,{get date(){return a()},get events(){return e(m)},onclose:()=>a(null)}),s(l),Ye(3,l,()=>Le,()=>({x:250,opacity:1,duration:Fe.current?0:250,easing:We})),v(r,l)};I(me,r=>{a()&&r(pe)})}s(X),s(z),C(()=>{H(ge,`${h[e(D)]??""} ${e(M)??""}`),se=Pe(X,1,"calendar__body svelte-x8tf7f",null,se,{"selected-date":a(),"dark-mode":fe.value==="dark","light-mode":fe.value==="light"})}),v(c,z),ae()}ee(["click"]);const ue=c=>{const t=new URL(window.location.toString());t.searchParams.forEach((f,u)=>t.searchParams.delete(u));for(let[f,u]of Object.entries(c))t.searchParams.set(f,u);try{Ae(t.toString(),{})}catch{console.log("womp womp")}};var lt=b('<h3 class="events__list-no-events svelte-1cxrsrz">No Events This Month</h3>'),it=b('<!> <main class="svelte-1cxrsrz"><h1 class="svelte-1cxrsrz">Events</h1> <!> <section class="month-events svelte-1cxrsrz"><h2 class="svelte-1cxrsrz">Events This Month</h2> <div class="events__list svelte-1cxrsrz"><!> <!></div></section> <section class="leaderboard svelte-1cxrsrz"><h2 class="svelte-1cxrsrz"><a class="svelte-1cxrsrz">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function kt(c,t){te(t,!0);let f=U(u());function u(){const i=new Set;return t.data.events.filter(T=>T.startDate.getMonth()==new Date().getMonth()).filter(T=>i.has(T.name)?!1:(i.add(T.name),!0))}let h=je(void 0),w=!1;Ce(()=>{if(de.url.searchParams.has("date")){const i=de.url.searchParams.get("date").split("-");ce(h,U(new Date(+i[0],+i[1]-1,+i[2]))),w=!0}}),Ee(()=>{if(e(h)===void 0||w){w=!1;return}if(e(h)===null){ue({});return}ue({date:`${e(h).getFullYear()}-${e(h).getMonth()+1}-${e(h).getDate()}`})});const k="Events | RHHS StuCo",Y="Stay up to date on all school events here!";var N=it(),L=J(N);Te(L,{title:k,description:Y,url:"https://rhhsstuco.ca/events"});var o=g(L,2),a=g(n(o),2);ot(a,{get events(){return t.data.events},get selectedDate(){return e(h)},set selectedDate(i){ce(h,U(i))}});var p=g(a,2),y=g(n(p),2),D=n(y);{var M=i=>{var T=lt();v(i,T)};I(D,i=>{f.length===0&&i(M)})}var S=g(D,2);R(S,17,()=>f,W,(i,T)=>{Ie(i,{get event(){return e(T)}})}),s(y),s(p);var d=g(p,2),E=n(d),z=n(E);G(z,"href",`${Oe??""}/grade-wars`),s(E);var j=g(E,2);Re(j,{get gradeColors(){return t.data.standings.rankings},get gradePoints(){return t.data.standings.gradePoints}}),s(d),s(o),v(c,N),ae()}export{kt as component};
