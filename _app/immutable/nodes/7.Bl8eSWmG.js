import{i as ae,a as i,t as y,e as we,c as K}from"../chunks/disclose-version.CJC2IDF7.js";import{p as X,c as o,s as p,X as ke,r as n,t as j,a as V,g as e,a4 as m,af as Ee,f as J,$ as Ce,h as ce,d as je}from"../chunks/runtime.DamBQiK-.js";import{i as N}from"../chunks/if.CS2cQMCp.js";import{e as A,i as L}from"../chunks/each.B7vWdueF.js";import{a as de,p as Q}from"../chunks/props.h2nwFH25.js";import{o as ze}from"../chunks/index-client.CmV38DSu.js";import{p as _e}from"../chunks/index.D2j4TdEZ.js";import{s as Y}from"../chunks/render.DiXaFIKv.js";import{s as Te,a as U}from"../chunks/attributes.u1kV7g2C.js";import{t as te}from"../chunks/class.C0UF-BvJ.js";import{t as Pe,f as Ye}from"../chunks/index.BWDDU_M4.js";import{t as fe}from"../chunks/theme.svelte.ClDERdfw.js";import{h as Fe,H as He}from"../chunks/HomePageEvent.DtlN1bhq.js";import{p as Ne}from"../chunks/index.BjEEa4nc.js";import{M as qe}from"../chunks/Metadata.DO8iINRu.js";import{a as Ie}from"../chunks/entry.BjF96MrP.js";function Ae(c){return c/=.5,c<1?.5*c*c:(c--,-.5*(c*(c-2)-1))}var Le=y('<div class="svelte-92mx0f"> </div>'),Oe=y('<div class="svelte-92mx0f"> </div>'),Re=y('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),Je=y('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function We(c,a){X(a,!0);function _(l){if(!l)return[0,0];let r=0,b=0;for(const x of l)x.type==="school"?r++:b++;return[r,b]}let f=m(()=>_(a.events)),u=m(()=>e(f)[0]),w=m(()=>e(f)[1]);var k=Je();k.__click=function(...l){var r;(r=a.onClick)==null||r.apply(this,l)};var z=o(k);{var F=l=>{var r=Re(),b=o(r);{var x=S=>{var t=Le();U(t,"style","--color-badge: var(--color-badge-school);");var g=o(t,!0);n(t),j(()=>Y(g,e(u))),i(S,t)};N(b,S=>{e(u)!=0&&S(x)})}var D=p(b,2);{var M=S=>{var t=Oe();U(t,"style","--color-badge: var(--color-badge-club);");var g=o(t,!0);n(t),j(()=>Y(g,e(w))),i(S,t)};N(D,S=>{e(w)!=0&&S(M)})}n(r),i(l,r)};N(z,l=>{a.onClick&&l(F)})}var T=p(z,2);Te(T,()=>a.children??ke),n(k),j(()=>k.disabled=!a.onClick),i(c,k),V()}ae(["click"]);var Be=y('<div class="calendar-detail__content__events__event svelte-g5jfz3"><h4 class="svelte-g5jfz3"> </h4> <p class="svelte-g5jfz3"><!></p></div>'),Ge=y('<div class="calendar-detail__no-events svelte-g5jfz3">No events on this day.</div>'),Ke=y('<div class="calendar-detail svelte-g5jfz3"><div class="calendar-detail__content svelte-g5jfz3"><div class="calendar-detail__content__heading svelte-g5jfz3"><div class="calendar-detail__content__heading__header svelte-g5jfz3"><button class="svelte-g5jfz3">&times;</button> <span class="school-event svelte-g5jfz3">School</span> <span class="club-event svelte-g5jfz3">Club</span></div> <h3 class="svelte-g5jfz3"> </h3></div> <div class="calendar-detail__content__events svelte-g5jfz3"></div></div></div>');function Qe(c,a){X(a,!0);var _=Ke(),f=o(_),u=o(f),w=o(u),k=o(w);k.__click=function(...l){var r;(r=a.onClose)==null||r.apply(this,l)},Ee(4),n(w);var z=p(w,2),F=o(z,!0);j(()=>Y(F,a.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"}))),n(z),n(u);var T=p(u,2);A(T,21,()=>a.events,L,(l,r)=>{var b=Be(),x=o(b),D=o(x,!0);n(x);var M=p(x,2),S=o(M);{var t=C=>{var P=we();j(()=>Y(P,e(r).description)),i(C,P)},g=C=>{var P=K(),O=J(P);Fe(O,()=>e(r).description),i(C,P)};N(S,C=>{e(r).useHTML?C(g,!1):C(t)})}n(M),n(b),j(()=>{U(x,"style",`--color-badge: var(--color-badge-${e(r).type})`),Y(D,e(r).name)}),i(l,b)},l=>{var r=Ge();i(l,r)}),n(T),n(f),n(_),i(c,_),V()}ae(["click"]);var Ue=(c,a,_,f)=>a(new Date(e(_),e(f)-1,1)),Xe=(c,a,_,f)=>a(new Date(e(_),e(f)+1,1)),Ve=y('<div class="svelte-x8tf7f"> </div>'),Ze=y('<span class="calendar__body__day svelte-x8tf7f"> </span>'),$e=y("<div></div>"),et=y('<div class="calendar__body__event svelte-x8tf7f"><div class="text-wrapper svelte-x8tf7f"> </div></div>'),tt=y('<div class="calendar-detail svelte-x8tf7f"><!></div>'),at=y('<div class="calendar svelte-x8tf7f"><div class="calendar__header svelte-x8tf7f"><div class="calendar__header__date svelte-x8tf7f"><button aria-label="Previous month" class="svelte-x8tf7f"><i class="ri-arrow-left-s-line svelte-x8tf7f"></i></button> <h2 class="svelte-x8tf7f"> </h2> <button aria-label="Next month" class="svelte-x8tf7f"><i class="ri-arrow-right-s-line svelte-x8tf7f"></i></button></div> <div class="calendar__header__days svelte-x8tf7f"></div></div> <div class="calendar__body svelte-x8tf7f"><!> <!>  <!></div></div>');function rt(c,a){X(a,!0);const _=1e3*60*60*24,f=7,u=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function k(s,v){const d=new Map;return s.forEach(h=>{const q=v(h);for(const H of q){const E=d.get(H)||[];E.push(h),d.set(H,E)}}),d}function z(s,v){const d=new Date(s),h=new Date(v);return d.setHours(0,0,0,0),h.setHours(0,0,0,0),(h.getTime()-d.getTime())/_}function F(s){return s%4===0&&s%100!==0&&s%400!==0||s%100===0&&s%400===0}function T(s){return F(s)?29:28}let l=de(a,"date",31,()=>Q(new Date)),r=de(a,"selectedDate",15);const b=s=>()=>r(s);let x=m(()=>k(a.events,s=>{const v=Array(z(s.startDate,s.endDate)+1).fill(0),d=s.startDate.getFullYear(),h=s.startDate.getMonth(),q=s.startDate.getDate();return v.map((H,E)=>new Date(d,h,q+E).toDateString())})),D=m(()=>l().getMonth()),M=m(()=>l().getFullYear()),S=m(()=>[31,T(e(M)),31,30,31,30,31,31,30,31,30,31]),t=m(()=>new Date(e(M),e(D),1).getDay()%7),g=m(()=>Math.ceil((e(t)+e(S)[e(D)])/7));var C=at(),P=o(C),O=o(P),re=o(O);re.__click=[Ue,l,M,D];var Z=p(re,2),ge=o(Z);n(Z);var he=p(Z,2);he.__click=[Xe,l,M,D],n(O);var se=p(O,2);A(se,21,()=>w,L,(s,v)=>{var d=Ve(),h=o(d,!0);n(d),j(()=>Y(h,e(v))),i(s,d)}),n(se),n(P);var R=p(P,2),ne=o(R);A(ne,17,()=>({length:e(g)}),L,(s,v,d)=>{var h=K(),q=J(h);A(q,17,()=>({length:f}),L,(E,le,W)=>{var B=K();const G=m(()=>d*f+W-e(t)+1),ve=m(()=>new Date(e(M),e(D),e(G))),ie=m(()=>e(G)>0&&e(G)<=e(S)[e(D)]);var De=J(B);{var ye=I=>{var $=m(()=>e(x).get(e(ve).toDateString())),xe=m(()=>e(ie)&&b(e(ve)));We(I,{get events(){return e($)},get onClick(){return e(xe)},children:(Me,ot)=>{var ee=Ze(),Se=o(ee,!0);n(ee),j(()=>Y(Se,e(G))),i(Me,ee)},$$slots:{default:!0}})},be=I=>{var $=$e();i(I,$)};N(De,I=>{e(ie)?I(ye):I(be,!1)})}i(E,B)}),i(s,h)});var oe=p(ne,2);A(oe,17,()=>a.events.toReversed(),L,(s,v)=>{var d=K(),h=J(d);{var q=H=>{var E=et();const le=m(()=>`
						grid-row: ${Math.ceil((e(v).startDate.getDate()+e(t))/7)} / ${Math.ceil((e(v).endDate.getDate()+e(t))/7)};
						grid-column: ${e(v).startDate.getDay()+1} / ${e(v).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(v).type})
					`);var W=o(E),B=o(W,!0);n(W),n(E),j(()=>{U(E,"style",e(le)),Y(B,e(v).name)}),i(H,E)};N(h,H=>{e(v).startDate.getMonth()===e(D)&&e(v).startDate.getFullYear()===e(M)&&H(q)})}i(s,d)});var me=p(oe,2);{var pe=s=>{var v=tt(),d=o(v),h=m(()=>e(x).get(r().toDateString())||[]);Qe(d,{get date(){return r()},get events(){return e(h)},onClose:()=>r(null)}),n(v),Pe(3,v,()=>Ye,()=>({x:250,opacity:1,duration:Ne.current?0:250,easing:Ae})),i(s,v)};N(me,s=>{r()&&s(pe)})}n(R),n(C),j(()=>{Y(ge,`${u[e(D)]??""} ${e(M)??""}`),te(R,"selected-date",r()),te(R,"dark-mode",fe.value==="dark"),te(R,"light-mode",fe.value==="light")}),i(c,C),V()}ae(["click"]);const ue=c=>{const a=new URL(window.location.toString());a.searchParams.forEach((_,f)=>a.searchParams.delete(f));for(let[_,f]of Object.entries(c))a.searchParams.set(_,f);try{Ie(a.toString(),{})}catch{console.log("womp womp")}};var st=y('<h3 class="events__list-no-events svelte-1nr3gqv">No Events This Month</h3>'),nt=y('<!> <main class="svelte-1nr3gqv"><h1 class="svelte-1nr3gqv">Events</h1> <!> <section class="month-events svelte-1nr3gqv"><h2 class="svelte-1nr3gqv">Events This Month</h2> <div class="events__list svelte-1nr3gqv"><!> <!></div></section></main>',1);function Mt(c,a){X(a,!0);let _=Q(f());function f(){const t=new Set;return a.data.events.filter(g=>g.startDate.getMonth()==new Date().getMonth()).filter(g=>t.has(g.name)?!1:(t.add(g.name),!0))}let u=je(void 0),w=!1;ze(()=>{if(_e.url.searchParams.has("date")){const t=_e.url.searchParams.get("date").split("-");ce(u,Q(new Date(+t[0],+t[1]-1,+t[2]))),w=!0}}),Ce(()=>{if(e(u)===void 0||w){w=!1;return}if(e(u)===null){ue({});return}console.log(e(u)),ue({date:`${e(u).getFullYear()}-${e(u).getMonth()+1}-${e(u).getDate()}`})});const k="Events | RHHS StuCo",z="Stay up to date on all school events here!";var F=nt(),T=J(F);qe(T,{title:k,description:z,url:"https://rhhsstuco.ca/events"});var l=p(T,2),r=p(o(l),2);rt(r,{get events(){return a.data.events},get selectedDate(){return e(u)},set selectedDate(t){ce(u,Q(t))}});var b=p(r,2),x=p(o(b),2),D=o(x);{var M=t=>{var g=st();i(t,g)};N(D,t=>{_.length===0&&t(M)})}var S=p(D,2);A(S,17,()=>_,L,(t,g)=>{He(t,{get event(){return e(g)}})}),n(x),n(b),n(l),i(c,F),V()}export{Mt as component};
